<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>åŸºäºRedis+Sessionçš„åˆ†å¸ƒå¼ç™»å½•åŠŸèƒ½</title>
      <link href="/2024/06/05/%E5%9F%BA%E4%BA%8ERedis%20+%20Session%E7%9A%84%20%E5%88%86%E5%B8%83%E5%BC%8F%20%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD/"/>
      <url>/2024/06/05/%E5%9F%BA%E4%BA%8ERedis%20+%20Session%E7%9A%84%20%E5%88%86%E5%B8%83%E5%BC%8F%20%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºRedis-Sessionçš„-åˆ†å¸ƒå¼-ç™»å½•åŠŸèƒ½"><a href="#åŸºäºRedis-Sessionçš„-åˆ†å¸ƒå¼-ç™»å½•åŠŸèƒ½" class="headerlink" title="åŸºäºRedis + Sessionçš„ åˆ†å¸ƒå¼ ç™»å½•åŠŸèƒ½"></a>åŸºäºRedis + Sessionçš„ åˆ†å¸ƒå¼ ç™»å½•åŠŸèƒ½</h1><blockquote><p>å…­ç§ç™»å½•æ–¹å¼ï¼š</p><p>Cookie-Session è®¤è¯ã€Redis-Session è®¤è¯ã€Tokenè®¤è¯ã€åŸºäºTokençš„JWTè®¤è¯ã€ SSOå•ç‚¹ç™»å½•ã€OAuthç¬¬ä¸‰æ–¹ç™»å½•ã€‚ğŸ“œ</p><p>è¿™é‡Œè®²è§£ä¸€ä¸‹goè¯­è¨€ç‰ˆçš„Redis-Sessionã€‚â³</p><p>ä¸ºä»€ä¹ˆç”¨Redis-Sessionï¼ŸğŸ¤”</p><p>1ã€ç®€å•æ˜“å®ç°   ğŸ‘ˆğŸ˜‚</p><p>2ã€Rediså…·æœ‰æå¿«çš„è¯»å†™é€Ÿåº¦å’Œé«˜å¹¶å‘èƒ½åŠ›   ğŸš€</p><p>3ã€Rediså¤©ç”Ÿæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²å’Œæ•°æ®å…±äº«ï¼Œæœ‰åˆ©äºé¡¹ç›®çš„æ‰©å±•   ğŸ“š</p></blockquote><h2 id="1ã€ğŸ›©å®‰è£…ä¾èµ–"><a href="#1ã€ğŸ›©å®‰è£…ä¾èµ–" class="headerlink" title="1ã€ğŸ›©å®‰è£…ä¾èµ–"></a>1ã€ğŸ›©å®‰è£…ä¾èµ–</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/go-redis/redis/v8</span><br><span class="line">go get github.com/gin-contrib/sessions</span><br><span class="line">go get github.com/gin-contrib/sessions/redis</span><br></pre></td></tr></table></figure><h2 id="2ã€ğŸ›©é…ç½®rediså’Œsession"><a href="#2ã€ğŸ›©é…ç½®rediså’Œsession" class="headerlink" title="2ã€ğŸ›©é…ç½®rediså’Œsession"></a>2ã€ğŸ›©é…ç½®rediså’Œsession</h2><p><strong>åœ¨routeråŒ…ä¸‹</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®Redisè¿æ¥å’ŒSessionå­˜å‚¨</span></span><br><span class="line">store, err := redis.NewStore(<span class="number">10</span>, <span class="string">&quot;tcp&quot;</span>, <span class="string">&quot;localhost:6379&quot;</span>, <span class="string">&quot;&quot;</span>, []<span class="type">byte</span>(<span class="string">&quot;secret&quot;</span>))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">r.Use(sessions.Sessions(<span class="string">&quot;mysession&quot;</span>, store))</span><br></pre></td></tr></table></figure><h2 id="3ã€ğŸ›©æ·»åŠ æ‹¦æˆªå™¨"><a href="#3ã€ğŸ›©æ·»åŠ æ‹¦æˆªå™¨" class="headerlink" title="3ã€ğŸ›©æ·»åŠ æ‹¦æˆªå™¨"></a>3ã€ğŸ›©æ·»åŠ æ‹¦æˆªå™¨</h2><h3 id="1ã€æ·»åŠ ä¸­é—´ä»¶å‡½æ•°ï¼š"><a href="#1ã€æ·»åŠ ä¸­é—´ä»¶å‡½æ•°ï¼š" class="headerlink" title="1ã€æ·»åŠ ä¸­é—´ä»¶å‡½æ•°ï¼š"></a>1ã€æ·»åŠ ä¸­é—´ä»¶å‡½æ•°ï¼š</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HomePage å¤„ç†ä¸»é¡µé¢è¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HomePage</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session := sessions.Default(c)</span><br><span class="line">userID := session.Get(<span class="string">&quot;user_id&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> userID == <span class="literal">nil</span> &#123;</span><br><span class="line">c.JSON(http.StatusUnauthorized, gin.H&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Please login first&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c.HTML(http.StatusOK, <span class="string">&quot;index.html&quot;</span>, gin.H&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AuthMiddleware æ˜¯ä¸€ä¸ªç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•çš„ä¸­é—´ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AuthMiddleware</span><span class="params">()</span></span> gin.HandlerFunc &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session := sessions.Default(c)</span><br><span class="line">userID := session.Get(<span class="string">&quot;user_id&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> userID == <span class="literal">nil</span> &#123;</span><br><span class="line">c.Redirect(http.StatusFound, <span class="string">&quot;/login&quot;</span>)</span><br><span class="line">c.Abort()</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">c.Next()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€æ³¨å†Œè·¯ç”±ï¼š"><a href="#2ã€æ³¨å†Œè·¯ç”±ï¼š" class="headerlink" title="2ã€æ³¨å†Œè·¯ç”±ï¼š"></a>2ã€æ³¨å†Œè·¯ç”±ï¼š</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨AuthMiddlewareä¿æŠ¤ä»¥ä¸‹è·¯ç”±</span></span><br><span class="line">protected := r.Group(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">protected.Use(service.AuthMiddleware())</span><br><span class="line">&#123;</span><br><span class="line">protected.GET(<span class="string">&quot;/&quot;</span>, service.HomePage)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4ã€ğŸ›©å‡çº§ç™»å½•é€»è¾‘"><a href="#4ã€ğŸ›©å‡çº§ç™»å½•é€»è¾‘" class="headerlink" title="4ã€ğŸ›©å‡çº§ç™»å½•é€»è¾‘"></a>4ã€ğŸ›©å‡çº§ç™»å½•é€»è¾‘</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserLogin å¤„ç†ç”¨æˆ·ç™»å½•è¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UserLogin</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾ç”¨æˆ·</span></span><br><span class="line"><span class="keyword">var</span> user domain.User</span><br><span class="line"><span class="keyword">if</span> err := repository.DB.Where(<span class="string">&quot;username = ? AND password = ?&quot;</span>, username, password).First(&amp;user).Error; err != <span class="literal">nil</span> &#123;</span><br><span class="line">c.JSON(http.StatusUnauthorized, gin.H&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Invalid credentials&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç™»å½•æˆåŠŸï¼Œåˆ›å»ºsession</span></span><br><span class="line">session := sessions.Default(c)</span><br><span class="line">session.Set(<span class="string">&quot;user_id&quot;</span>, user.ID)</span><br><span class="line">session.Save()</span><br><span class="line"><span class="comment">// ç™»å½•æˆåŠŸï¼Œé‡å®šå‘åˆ°ä¸»é¡µé¢</span></span><br><span class="line">c.Redirect(http.StatusFound, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5ã€ğŸ›©å‡çº§æ³¨å†Œé€»è¾‘"><a href="#5ã€ğŸ›©å‡çº§æ³¨å†Œé€»è¾‘" class="headerlink" title="5ã€ğŸ›©å‡çº§æ³¨å†Œé€»è¾‘"></a>5ã€ğŸ›©å‡çº§æ³¨å†Œé€»è¾‘</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserRegister å¤„ç†ç”¨æˆ·æ³¨å†Œè¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UserRegister</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"><span class="comment">// æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">if</span> username == <span class="string">&quot;&quot;</span> || password == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">c.JSON(http.StatusBadRequest, gin.H&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Username and password are required&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ›å»ºç”¨æˆ·æ¨¡å‹</span></span><br><span class="line">user := domain.User&#123;</span><br><span class="line">Username: username,</span><br><span class="line">Password: password,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">if</span> err := repository.DB.Create(&amp;user).Error; err != <span class="literal">nil</span> &#123;</span><br><span class="line">c.JSON(http.StatusInternalServerError, gin.H&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Registration failed&quot;</span>, <span class="string">&quot;error&quot;</span>: err.Error()&#125;)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ç™»å½•å¹¶åˆ›å»ºsession</span></span><br><span class="line">session := sessions.Default(c)</span><br><span class="line">session.Set(<span class="string">&quot;user_id&quot;</span>, user.ID)</span><br><span class="line">session.Save()</span><br><span class="line"><span class="comment">// æ³¨å†ŒæˆåŠŸåé‡å®šå‘åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line">c.Redirect(http.StatusFound, <span class="string">&quot;/login&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ä¸šåŠ¡å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»Ÿä¸€æ¥å£è¿”å›å’Œå…¨å±€å¼‚å¸¸å¤„ç†</title>
      <link href="/2024/06/03/%E7%BB%9F%E4%B8%80%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E%E5%92%8C%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"/>
      <url>/2024/06/03/%E7%BB%9F%E4%B8%80%E6%8E%A5%E5%8F%A3%E8%BF%94%E5%9B%9E%E5%92%8C%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»Ÿä¸€æ¥å£è¿”å›å’Œå…¨å±€å¼‚å¸¸å¤„ç†"><a href="#ç»Ÿä¸€æ¥å£è¿”å›å’Œå…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="ç»Ÿä¸€æ¥å£è¿”å›å’Œå…¨å±€å¼‚å¸¸å¤„ç†"></a>ç»Ÿä¸€æ¥å£è¿”å›å’Œå…¨å±€å¼‚å¸¸å¤„ç†</h1><blockquote><p>1ã€ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€è¿”å›ç±»ï¼Ÿ</p><p>è§„èŒƒåŒ–è¿”å›çš„ä¿¡æ¯ã€æé«˜ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼ŒåŒæ—¶å‡å°‘é‡å¤åŠ³åŠ¨ã€‚</p><p>2ã€ä¸ºä»€ä¹ˆéœ€è¦å…¨å±€å¼‚å¸¸å¤„ç†ï¼Ÿ</p><p>å¦‚æœä¸åšå…¨å±€å¼‚å¸¸å¤„ç†ï¼Œä»£ç ä¸­çš„å¼‚å¸¸è¦ç”¨ä¸€äº›try-catchã€throwæ¥å¤„ç†ï¼Œè¿™æ ·åšä¼šä¸ä»…æé«˜äº†ä»£ç çš„è€¦åˆåº¦è¿˜ä¼šå½±å“ä»£ç çš„ç¾è§‚ã€‚</p><p>å¥½å¤„ï¼šæ ‡å‡†åŒ–ã€ç®€åŒ–ä»£ç çš„ä¸šåŠ¡é€»è¾‘ã€å‹å¥½è¿”å›ã€‚</p></blockquote><h2 id="ç»Ÿä¸€æ¥å£è¿”å›"><a href="#ç»Ÿä¸€æ¥å£è¿”å›" class="headerlink" title="ç»Ÿä¸€æ¥å£è¿”å›"></a>ç»Ÿä¸€æ¥å£è¿”å›</h2><h3 id="1ã€åŸºç¡€è¿”å›ç±»"><a href="#1ã€åŸºç¡€è¿”å›ç±»" class="headerlink" title="1ã€åŸºç¡€è¿”å›ç±»"></a>1ã€åŸºç¡€è¿”å›ç±»</h3><ol><li>ç¼–å†™éœ€è¦çš„å­—æ®µï¼ˆä¸€èˆ¬ä¸ºcodeã€dataã€messageï¼‰</li><li>ç¼–å†™éœ€è¦çš„è¯­æ³•ç³–</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: åŸºç¡€è¿”å›ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: ler</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseResponse</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"><span class="comment">// é”™è¯¯ç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"><span class="comment">// æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"><span class="comment">// ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseResponse</span><span class="params">(<span class="type">int</span> code, T data, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseResponse</span><span class="params">(<span class="type">int</span> code, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseResponse</span><span class="params">(ErrorCode errorCode)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(errorCode.getCode(), <span class="literal">null</span>, errorCode.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€é”™è¯¯ç "><a href="#2ã€é”™è¯¯ç " class="headerlink" title="2ã€é”™è¯¯ç "></a>2ã€é”™è¯¯ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é”™è¯¯ç </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ler</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ErrorCode</span> &#123;</span><br><span class="line"></span><br><span class="line">    SUCCESS(<span class="number">20000</span>, <span class="string">&quot;æˆåŠŸ&quot;</span>),</span><br><span class="line">    PARAMS_ERROR(<span class="number">40000</span>, <span class="string">&quot;è¯·æ±‚å‚æ•°é”™è¯¯&quot;</span>),</span><br><span class="line">    NOT_LOGIN_ERROR(<span class="number">40100</span>, <span class="string">&quot;æœªç™»å½•&quot;</span>),</span><br><span class="line">    NO_AUTH_ERROR(<span class="number">40101</span>, <span class="string">&quot;æ— æƒé™&quot;</span>),</span><br><span class="line">    NOT_FOUND_ERROR(<span class="number">40400</span>, <span class="string">&quot;è¯·æ±‚æ•°æ®ä¸å­˜åœ¨&quot;</span>),</span><br><span class="line">    FORBIDDEN_ERROR(<span class="number">40300</span>, <span class="string">&quot;ç¦æ­¢è®¿é—®&quot;</span>),</span><br><span class="line">    SYSTEM_ERROR(<span class="number">50000</span>, <span class="string">&quot;ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸&quot;</span>),</span><br><span class="line">    OPERATION_ERROR(<span class="number">50001</span>, <span class="string">&quot;æ“ä½œå¤±è´¥&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é”™è¯¯ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String message;</span><br><span class="line"></span><br><span class="line">    ErrorCode(<span class="type">int</span> code, String message) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€è¿”å›å·¥å…·ç±»"><a href="#3ã€è¿”å›å·¥å…·ç±»" class="headerlink" title="3ã€è¿”å›å·¥å…·ç±»"></a>3ã€è¿”å›å·¥å…·ç±»</h3><p><em><strong>ä¸ç”¨ new äº†</strong></em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; BaseResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>&lt;&gt;(<span class="number">0</span>, data, <span class="string">&quot;success&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BaseResponse <span class="title function_">error</span><span class="params">(ErrorCode errorCode)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>&lt;&gt;(errorCode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BaseResponse <span class="title function_">error</span><span class="params">(<span class="type">int</span> code, String message, String description)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>&lt;&gt;(code, message, description);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BaseResponse <span class="title function_">error</span><span class="params">(ErrorCode errorCode, String message)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>&lt;&gt;(errorCode.getCode(), message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BaseResponse <span class="title function_">error</span><span class="params">(ErrorCode errorCode, String message, String description)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BaseResponse</span>&lt;&gt;(errorCode.getCode(), message, description);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…¨å±€å¼‚å¸¸å¤„ç†"><a href="#å…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="å…¨å±€å¼‚å¸¸å¤„ç†"></a>å…¨å±€å¼‚å¸¸å¤„ç†</h2><h3 id="1ã€åˆ›å»ºä¸šåŠ¡å¼‚å¸¸ç±»"><a href="#1ã€åˆ›å»ºä¸šåŠ¡å¼‚å¸¸ç±»" class="headerlink" title="1ã€åˆ›å»ºä¸šåŠ¡å¼‚å¸¸ç±»"></a>1ã€åˆ›å»ºä¸šåŠ¡å¼‚å¸¸ç±»</h3><ol><li>ç»§æ‰¿ <strong>RuntimeException</strong></li><li>ç¼–å†™éœ€è¦çš„å­—æ®µï¼ˆä¸€èˆ¬æ˜¯ codeã€descriptionï¼‰</li><li>ç¼–å†™ä¸€äº›è¯­æ³•ç³–ï¼Œç”¨äºå¤„ç†ä¸šåŠ¡ä¸­éœ€è¦çš„å­—æ®µ</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸šåŠ¡å¼‚å¸¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ler</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BusinessException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line"><span class="comment">// é”™è¯¯ç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"><span class="comment">// é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯­æ³•ç³–</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(<span class="type">int</span> code, String description)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(description);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(ErrorCode errorCode)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(errorCode.getMessage());</span><br><span class="line">        <span class="built_in">this</span>.code = errorCode.getCode();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(ErrorCode errorCode, String description)</span>  &#123;</span><br><span class="line">        <span class="built_in">super</span>(errorCode.getMessage());</span><br><span class="line">        <span class="built_in">this</span>.code = errorCode.getCode();</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†ç±»"><a href="#2ã€ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†ç±»" class="headerlink" title="2ã€ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†ç±»"></a>2ã€ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†ç±»</h3><ol><li>åœ¨ç±»åä¸Šæ ‡æ³¨ <strong>@RestControllerAdvice</strong> æ³¨è§£</li><li>åœ¨æ–¹æ³•åä¸Šæ ‡æ³¨ <strong>@ExceptionHandler(BusinessException.class)</strong> æ³¨è§£</li><li>ç¼–å†™å¼‚å¸¸å¤„ç†é€»è¾‘</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ler</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">    <span class="keyword">public</span> BaseResponse <span class="title function_">businessExceptionHandler</span><span class="params">(BusinessException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;businessException: &quot;</span> + e.getMessage(), e);</span><br><span class="line">        <span class="keyword">return</span> ResultUtils.error(e.getCode(), e.getMessage(), e.getDescription());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(RuntimeException.class)</span></span><br><span class="line">    <span class="keyword">public</span> BaseResponse <span class="title function_">runtimeExceptionHandler</span><span class="params">(RuntimeException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;runtimeException: &quot;</span> + e.getMessage(), e);</span><br><span class="line">        <span class="keyword">return</span> ResultUtils.error(ErrorCode.SYSTEM_ERROR, e.getMessage(), <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ä¸šåŠ¡å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Swagger</title>
      <link href="/2024/04/25/Swagger/"/>
      <url>/2024/04/25/Swagger/</url>
      
        <content type="html"><![CDATA[<h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><blockquote><p>Swaggeræ˜¯ä¸€ä¸ªè§„èŒƒå’Œå®Œæ•´çš„æ¡†æ¶,ç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ–RESTfulé£æ ¼çš„WebæœåŠ¡</p><p>ä¸€æ¬¾è‡´åŠ›äºè§£å†³æ¥å£è§„èŒƒåŒ–ã€æ ‡å‡†åŒ–ã€æ–‡æ¡£åŒ–çš„å¼€æºåº“</p><p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://swagger.io/">https://swagger.io/</a></p><p>Knife4jæ˜¯é›†Swagger2åŠOpenAPI3ä¸ºä¸€ä½“çš„å¢å¼ºè§£å†³æ–¹æ¡ˆ</p><p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://doc.xiaominfo.com/">https://doc.xiaominfo.com/</a></p></blockquote><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="æ¥å£å‚æ•°ï¼š"><a href="#æ¥å£å‚æ•°ï¼š" class="headerlink" title="æ¥å£å‚æ•°ï¼š"></a>æ¥å£å‚æ•°ï¼š</h3><ul><li><p>è¯·æ±‚å‚æ•°</p></li><li><p>å“åº”å‚æ•°</p><ul><li>é”™è¯¯ç </li></ul></li><li><p>æ¥å£åœ°å€</p></li><li><p>æ¥å£åç§°</p></li><li><p>è¯·æ±‚ç±»å‹</p></li><li><p>è¯·æ±‚æ ¼å¼</p></li><li><p>å¤‡æ³¨</p></li></ul><h3 id="ä½œç”¨ï¼š"><a href="#ä½œç”¨ï¼š" class="headerlink" title="ä½œç”¨ï¼š"></a>ä½œç”¨ï¼š</h3><ul><li>æœ‰ä¹¦é¢å†…å®¹ï¼Œæ–¹ä¾¿å¤§å®¶å‚è€ƒã€æŸ¥é˜…ã€ç»´æŠ¤</li><li>ä¾¿äºå‰åç«¯å¯¹æ¥ï¼Œ<strong>ä»‹è´¨</strong>ï¼Œåç«¯ &#x3D;&gt; æ¥å£æ–‡æ¡£ &lt;&#x3D; å‰ç«¯</li><li>åœ¨çº¿è°ƒè¯•ã€åœ¨çº¿æµ‹è¯•ï¼Œæé«˜å¼€å‘æ•ˆç‡</li></ul><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨:"></a>å…¥é—¨:</h2><h3 id="1ã€æ·»åŠ ä¾èµ–ï¼š"><a href="#1ã€æ·»åŠ ä¾èµ–ï¼š" class="headerlink" title="1ã€æ·»åŠ ä¾èµ–ï¼š"></a>1ã€æ·»åŠ ä¾èµ–ï¼š</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--swagger ui--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€æ•´åˆSpringBoot"><a href="#2ã€æ•´åˆSpringBoot" class="headerlink" title="2ã€æ•´åˆSpringBoot"></a>2ã€æ•´åˆSpringBoot</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">productApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                <span class="comment">// æ ‡æ³¨æ¥å£ï¼ˆControllerï¼‰ä½ç½®</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wu.pro_match.controller&quot;</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">            .title(<span class="string">&quot;pro-match&quot;</span>)</span><br><span class="line">            .description(<span class="string">&quot;pro-matchçš„APIæ–‡æ¡£&quot;</span>)</span><br><span class="line">            .termsOfServiceUrl(<span class="string">&quot;https://github.com/Miaowzhz&quot;</span>)</span><br><span class="line">            .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">            .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="knife4j"><a href="#knife4j" class="headerlink" title="knife4j"></a>knife4j</h2><p>Knife4jæ˜¯ä¸€ä¸ªé›†Swagger2 å’Œ OpenAPI3 ä¸ºä¸€ä½“çš„å¢å¼ºè§£å†³æ–¹æ¡ˆ</p><p>å¯ä»¥ç†è§£ä¸º Swagger çš„å‡çº§ï¼Œæœ‰æ›´å¥½çœ‹çš„ ui ç•Œé¢</p><h3 id="1ã€æ·»åŠ ä¾èµ–"><a href="#1ã€æ·»åŠ ä¾èµ–" class="headerlink" title="1ã€æ·»åŠ ä¾èµ–"></a>1ã€æ·»åŠ ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>knife4j-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€æ•´åˆSpringBoot-1"><a href="#2ã€æ•´åˆSpringBoot-1" class="headerlink" title="2ã€æ•´åˆSpringBoot"></a>2ã€æ•´åˆSpringBoot</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2WebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;productApi&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">productApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .select()</span><br><span class="line">                <span class="comment">// æ ‡æ³¨æ¥å£ï¼ˆControllerï¼‰ä½ç½®</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wu.pro_match.controller&quot;</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * api ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;pro-match&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;pro-matchçš„APIæ–‡æ¡£&quot;</span>)</span><br><span class="line">                .termsOfServiceUrl(<span class="string">&quot;https://github.com/Miaowzhz&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h2><p><strong>å¦‚æœ springboot ç‰ˆæœ¬ å¤§äºç­‰äº 2.6 ï¼Œéœ€è¦åœ¨application.ymlä¸­æ·»åŠ é…ç½®ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">pathmatch:</span></span><br><span class="line">      <span class="attr">matching-strategy:</span> <span class="string">ant_path_matcher</span></span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœï¼š"><a href="#æ•ˆæœï¼š" class="headerlink" title="æ•ˆæœï¼š"></a>æ•ˆæœï¼š</h2><p><img src="/../images/Swagger/1.png" alt="1.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> æ¥å£æ–‡æ¡£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RabbitMQ</title>
      <link href="/2024/04/24/RabbitMQ/"/>
      <url>/2024/04/24/RabbitMQ/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸºäº AMQP åè®®ï¼Œerlangè¯­è¨€å¼€å‘ï¼Œæ˜¯éƒ¨ç½²æœ€å¹¿æ³›çš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶,æ˜¯æœ€å—æ¬¢è¿çš„å¼€æºæ¶ˆæ¯ä¸­é—´ä»¶ä¹‹ä¸€ã€‚</p></blockquote><blockquote><p>ç‰¹ç‚¹ï¼šç”Ÿæ€å¥½ï¼Œå¥½å­¦ä¹ ã€æ˜“ç†è§£ï¼Œæ—¶æ•ˆæ€§å¼ºï¼Œæ”¯æŒå¾ˆå¤šä¸åŒè¯­è¨€çš„å®¢æˆ·ç«¯ï¼Œæ‰©å±•æ€§ã€å¯ç”¨æ€§å¾ˆå¥½ã€‚</p></blockquote><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.rabbitmq.com/">https://www.rabbitmq.com</a></p></blockquote><h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><p>AMQP åè®®ï¼ˆ<a href="https://www.rabbitmq.com/tutorials/amqp-concepts%EF%BC%89%EF%BC%9A">https://www.rabbitmq.com/tutorials/amqp-conceptsï¼‰ï¼š</a> é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®</p><p>ç”Ÿäº§è€…ï¼šå‘æ¶ˆæ¯åˆ°äº¤æ¢æœº</p><p>æ¶ˆè´¹è€…ï¼šä»æŸä¸ªé˜Ÿåˆ—ä¸­å–æ¶ˆæ¯</p><p>äº¤æ¢æœºï¼ˆExchanageï¼‰ï¼šæŠŠæ¶ˆæ¯ è½¬å‘ åˆ°å¯¹åº”çš„é˜Ÿåˆ—</p><p>é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼šå­˜å‚¨æ¶ˆæ¯</p><p>è·¯ç”±ï¼ˆRoutesï¼‰ï¼šè½¬å‘</p><p><img src="/../images/RabbitMQ/1.png" alt="1.png"></p><p>å®‰è£… rabbitMQ ç›‘æ§é¢æ¿</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq-plugins.bat enable rabbitmq_management</span><br></pre></td></tr></table></figure><p>è®¿é—®ï¼š<a href="http://localhost:15672/#/">http://localhost:15672</a></p><p>è´¦å·å¯†ç é»˜è®¤ä¸ºï¼šguest</p><p><img src="/../images/RabbitMQ/2.png" alt="2.png"></p><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.rabbitmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>amqp-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.20.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¤šæ¶ˆè´¹è€…"><a href="#å¤šæ¶ˆè´¹è€…" class="headerlink" title="å¤šæ¶ˆè´¹è€…"></a>å¤šæ¶ˆè´¹è€…</h2><p>åœºæ™¯ï¼šå¤šä¸ªæœºå™¨åŒæ—¶å»æ¥å—å¹¶å¤„ç†ä»»åŠ¡ã€‚ä¸€ä¸ªç”Ÿäº§è€…ç»™ä¸€ä¸ªé˜Ÿåˆ—å‘æ¶ˆæ¯ï¼Œå¤šä¸ªæ¶ˆè´¹è€…ä»è¿™ä¸ªé˜Ÿåˆ—å–æ¶ˆæ¯</p><p><img src="/../images/RabbitMQ/3.png" alt="3.png"></p><p><strong>é˜Ÿåˆ—æŒä¹…åŒ–ï¼š</strong></p><p>ç¬¬äºŒä¸ªå‚æ•°ï¼ˆdurableï¼‰è®¾ç½®ä¸ºtrueï¼ŒæœåŠ¡å™¨é‡å¯åé˜Ÿåˆ—ä¸ä¼šä¸¢å¤±ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel.queueDeclare(TASK_QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br></pre></td></tr></table></figure><p><strong>æ¶ˆæ¯æŒä¹…åŒ–ï¼š</strong></p><p>æŒ‡å®š MessageProperties.PERSISTENT_TEXT_PLAIN  å‚æ•°ï¼ŒæœåŠ¡å™¨é‡å¯åæ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">channel.basicPublish(<span class="string">&quot;&quot;</span>, TASK_QUEUE_NAME,</span><br><span class="line">        MessageProperties.PERSISTENT_TEXT_PLAIN,</span><br><span class="line">        message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿäº§è€…"><a href="#ç”Ÿäº§è€…" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultiConsumer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TASK_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;multi_queue&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//å»ºç«‹è¿æ¥</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">            channel.queueDeclare(TASK_QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot; [*] Waiting for messages. To exit press CTRL+C&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            channel.basicQos(<span class="number">1</span>);</span><br><span class="line">            <span class="comment">// å®šä¹‰å¦‚ä½•å¤„ç†æ¶ˆæ¯</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">finalI</span> <span class="operator">=</span> i+<span class="number">1</span>;</span><br><span class="line">            <span class="type">DeliverCallback</span> <span class="variable">deliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// å¤„ç†å·¥ä½œ</span></span><br><span class="line">                    System.out.println(<span class="string">&quot; [x] Received &#x27;&quot;</span> + <span class="string">&quot;ç¼–å·ï¼š&quot;</span> + finalI + <span class="string">&quot;:&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">                    channel.basicAck(delivery.getEnvelope().getDeliveryTag(), <span class="literal">false</span>);</span><br><span class="line">                    <span class="comment">// åœ20ç§’</span></span><br><span class="line">                    Thread.sleep(<span class="number">20000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    channel.basicNack(delivery.getEnvelope().getDeliveryTag(), <span class="literal">false</span>,<span class="literal">false</span>);</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot; [x] Done&quot;</span>);</span><br><span class="line">                    channel.basicAck(delivery.getEnvelope().getDeliveryTag(), <span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// å¼€å¯æ¶ˆè´¹è€…ç›‘å¬</span></span><br><span class="line">            channel.basicConsume(TASK_QUEUE_NAME, <span class="literal">false</span>, deliverCallback, consumerTag -&gt; &#123;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¶ˆè´¹è€…"><a href="#æ¶ˆè´¹è€…" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultiProducer</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TASK_QUEUE_NAME</span> <span class="operator">=</span> <span class="string">&quot;multi_queue&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">         <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel()) &#123;</span><br><span class="line">        channel.queueDeclare(TASK_QUEUE_NAME, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(scanner.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            channel.basicPublish(<span class="string">&quot;&quot;</span>, TASK_QUEUE_NAME,</span><br><span class="line">                    MessageProperties.PERSISTENT_TEXT_PLAIN,</span><br><span class="line">                    message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot; [x] Sent &#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å•ä¸ªæ¶ˆè´¹è€…çš„å¤„ç†ä»»åŠ¡ç§¯å‹æ•°ï¼š</strong></p><p>è¿™ä¸ªå‚æ•°å‘Šè¯‰RabbitMQä¸è¦åŒæ—¶ç»™ä¸€ä¸ªæ¶ˆè´¹è€…è¶…è¿‡ä¸€ä¸ªï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯1ï¼‰æœªç¡®è®¤çš„æ¶ˆæ¯ã€‚</p><p>è¿™æ„å‘³ç€æ¶ˆè´¹è€…åœ¨å¤„ç†å¹¶ç¡®è®¤ä¸€ä¸ªæ¶ˆæ¯ä¹‹å‰ï¼Œé˜Ÿåˆ—ä¸ä¼šå‘é€æ–°çš„æ¶ˆæ¯ç»™è¿™ä¸ªæ¶ˆè´¹è€…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel.basicQos(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p><strong>æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼š</strong></p><p>å½“æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œè¦ç»™ä¸€ä¸ªåé¦ˆï¼š</p><ul><li>ackï¼šæ¶ˆè´¹æˆåŠŸ</li><li>nackï¼šæ¶ˆè´¹å¤±è´¥</li><li>rejectï¼šæ‹’ç»</li></ul><p>è‡ªåŠ¨ç¡®è®¤ï¼ˆAuto Acknowledgmentï¼‰ï¼šå½“æ¶ˆè´¹è€…ä»é˜Ÿåˆ—ä¸­è·å–åˆ°æ¶ˆæ¯åï¼ŒRabbitMQä¼šç«‹å³è®¤ä¸ºæ¶ˆè´¹è€…å·²ç»æˆåŠŸå¤„ç†äº†æ¶ˆæ¯ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚è¿™ç§æ–¹å¼å¯èƒ½ä¼šå› ä¸ºæ¶ˆè´¹è€…åœ¨å¤„ç†æ¶ˆæ¯æ—¶å‘ç”Ÿå¼‚å¸¸è€Œå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€‚</p><p>å»ºè®®å°†autoackï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰æ”¹ä¸º falseï¼Œå»æ‰‹åŠ¨ç¡®è®¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯æ¶ˆè´¹è€…ç›‘å¬</span></span><br><span class="line">channel.basicConsume(TASK_QUEUE_NAME, <span class="literal">false</span>, deliverCallback, consumerTag -&gt; &#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>æŒ‡å®šç¡®è®¤æŸæ¡æ¶ˆæ¯ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel.basicAck(delivery.getEnvelope().getDeliveryTag(), <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªå‚æ•° multiple æ‰¹é‡ç¡®è®¤ï¼š æ˜¯æŒ‡æ˜¯å¦è¦ä¸€æ¬¡æ€§ç¡®è®¤æ‰€æœ‰çš„å†å²æ¶ˆæ¯ç›´åˆ°å½“å‰è¿™æ¡</p><p><strong>æŒ‡å®šæ‹’ç»æŸæ¡æ¶ˆæ¯ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel.basicNack(delivery.getEnvelope().getDeliveryTag(), <span class="literal">false</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºæ˜¯å¦é‡æ–°å…¥é˜Ÿï¼Œå¯ç”¨äºé‡è¯•</p><h2 id="äº¤æ¢æœº"><a href="#äº¤æ¢æœº" class="headerlink" title="äº¤æ¢æœº"></a>äº¤æ¢æœº</h2><p>ä¸€ä¸ªç”Ÿäº§è€…ç»™ å¤šä¸ª é˜Ÿåˆ—å‘æ¶ˆæ¯</p><p>ä½œç”¨ï¼šæä¾›è½¬å‘åŠŸèƒ½ï¼ŒæŠŠæ¶ˆæ¯è½¬å‘åˆ°ä¸åŒçš„é˜Ÿåˆ—ä¸Š</p><p>ç»‘å®šï¼šäº¤æ¢æœºå’Œé˜Ÿåˆ—å…³è”èµ·æ¥ï¼Œä¹Ÿå¯ä»¥å«è·¯ç”±ï¼Œç®—æ˜¯ä¸€ä¸ªç®—æ³•æˆ–è½¬å‘ç­–ç•¥</p><p><img src="/../images/RabbitMQ/4.png" alt="4.png"></p><p>äº¤æ¢æœºç±»åˆ«ï¼šfanoutã€directã€topicã€headers</p><h3 id="fanout-äº¤æ¢æœºï¼š"><a href="#fanout-äº¤æ¢æœºï¼š" class="headerlink" title="fanout äº¤æ¢æœºï¼š"></a>fanout äº¤æ¢æœºï¼š</h3><p>æ‰‡å‡ºã€å¹¿æ’­</p><p>ç‰¹ç‚¹ï¼šæ¶ˆæ¯ä¼šè½¬å‘åˆ°æ‰€æœ‰ç»‘å®šè¯¥äº¤æ¢æœºçš„é˜Ÿåˆ—ä¸Š</p><p>åœºæ™¯ï¼šå¾ˆé€‚ç”¨äºå‘å¸ƒè®¢é˜…çš„åœºæ™¯</p><h4 id="ç”Ÿäº§è€…-1"><a href="#ç”Ÿäº§è€…-1" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutProducer</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;fanout-exchange&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">         <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel()) &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºäº¤æ¢æœº</span></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;fanout&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(scanner.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line"></span><br><span class="line">            channel.basicPublish(EXCHANGE_NAME, <span class="string">&quot;&quot;</span>, <span class="literal">null</span>, message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot; [x] Sent &#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¶ˆè´¹è€…-1"><a href="#æ¶ˆè´¹è€…-1" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutConsumer</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;fanout-exchange&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// å»ºç«‹è¿æ¥</span></span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel1</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel2</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">    <span class="comment">// å£°æ˜äº¤æ¢æœº</span></span><br><span class="line">    channel1.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;fanout&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;å°é›¨çš„å·¥ä½œé˜Ÿåˆ—&quot;</span>;</span><br><span class="line">    channel1.queueDeclare(queueName, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    channel1.queueBind(queueName, EXCHANGE_NAME, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">queueName2</span> <span class="operator">=</span> <span class="string">&quot;å°æ˜çš„å·¥ä½œé˜Ÿåˆ—&quot;</span>;</span><br><span class="line">    channel2.queueDeclare(queueName2, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">    channel2.queueBind(queueName2, EXCHANGE_NAME, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot; [*] Waiting for messages. To exit press CTRL+C&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">DeliverCallback</span> <span class="variable">deliverCallback1</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot; [å°é›¨] Received &#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">DeliverCallback</span> <span class="variable">deliverCallback2</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot; [å°æ˜] Received &#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    channel1.basicConsume(queueName, <span class="literal">true</span>, deliverCallback1, consumerTag -&gt; &#123; &#125;);</span><br><span class="line">    channel2.basicConsume(queueName2, <span class="literal">true</span>, deliverCallback2, consumerTag -&gt; &#123; &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Direct-äº¤æ¢æœºï¼š"><a href="#Direct-äº¤æ¢æœºï¼š" class="headerlink" title="Direct äº¤æ¢æœºï¼š"></a>Direct äº¤æ¢æœºï¼š</h3><p>ç»‘å®šï¼šå¯ä»¥è®©äº¤æ¢æœºå’Œé˜Ÿåˆ—è¿›è¡Œå…³è”ï¼Œå¯æŒ‡å®šäº¤æ¢æœºå°†æŒ‡å®šçš„æ¶ˆæ¯å‘é€ç»™æŒ‡å®šçš„é˜Ÿåˆ—ï¼ˆå¯ä»¥ç†è§£ä¸ºç½‘çº¿ï¼‰</p><p>routingKeyï¼šè·¯ç”±é”®ï¼Œæ§åˆ¶æ¶ˆæ¯è¦è½¬å‘ç»™å“ªä¸ªé˜Ÿåˆ—ï¼ˆå¯ä»¥ç†è§£ä¸º IP åœ°å€ï¼‰</p><p>ç‰¹ç‚¹ï¼šæ¶ˆæ¯ä¼šæ ¹æ®è·¯ç”±é”®è½¬å‘åˆ°æŒ‡å®šçš„é˜Ÿåˆ—</p><p>åœºæ™¯ï¼šç‰¹å®šçš„æ¶ˆæ¯åªäº¤ç»™ç‰¹å®šçš„ç³»ç»Ÿï¼ˆç¨‹åºï¼‰æ¥å¤„ç†</p><p><img src="/../images/RabbitMQ/5.png" alt="5.png"></p><h4 id="ç”Ÿäº§è€…-2"><a href="#ç”Ÿäº§è€…-2" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DirectProducer</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;direct-exchange&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">         <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel()) &#123;</span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;direct&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(scanner.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">userInput</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            String[] strings = userInput.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(strings.length&lt;<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> strings[<span class="number">0</span>];</span><br><span class="line">            <span class="type">String</span> <span class="variable">routingKey</span> <span class="operator">=</span> strings[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">            channel.basicPublish(EXCHANGE_NAME, routingKey, <span class="literal">null</span>, message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot; [x] Sent &#x27;&quot;</span> + message + <span class="string">&quot; with routing: &quot;</span> + routingKey + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¶ˆè´¹è€…-2"><a href="#æ¶ˆè´¹è€…-2" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DirectConsumer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;direct-exchange&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;direct&quot;</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºé˜Ÿåˆ—-1</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName1</span> <span class="operator">=</span> <span class="string">&quot;direct1-test&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName1, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        channel.queueBind(queueName1, EXCHANGE_NAME, <span class="string">&quot;direct1&quot;</span>);</span><br><span class="line">        <span class="comment">// åˆ›å»ºé˜Ÿåˆ—-2</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName2</span> <span class="operator">=</span> <span class="string">&quot;direct2-test&quot;</span>;</span><br><span class="line">        channel.queueDeclare(queueName2, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">        channel.queueBind(queueName2, EXCHANGE_NAME, <span class="string">&quot;direct2&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot; [*] Waiting for messages. To exit press CTRL+C&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">direct1DeliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot; [direct1] Received &#x27;&quot;</span> +</span><br><span class="line">                    delivery.getEnvelope().getRoutingKey() + <span class="string">&quot;&#x27;:&#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">DeliverCallback</span> <span class="variable">direct2DeliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot; [direct2] Received &#x27;&quot;</span> +</span><br><span class="line">                    delivery.getEnvelope().getRoutingKey() + <span class="string">&quot;&#x27;:&#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        channel.basicConsume(queueName1, <span class="literal">true</span>, direct1DeliverCallback, consumerTag -&gt; &#123;</span><br><span class="line">        &#125;);</span><br><span class="line">        channel.basicConsume(queueName2, <span class="literal">true</span>, direct2DeliverCallback, consumerTag -&gt; &#123;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Topics-äº¤æ¢æœº"><a href="#Topics-äº¤æ¢æœº" class="headerlink" title="Topics äº¤æ¢æœº"></a>Topics äº¤æ¢æœº</h3><p>ç‰¹ç‚¹ï¼šæ¶ˆæ¯ä¼šæ ¹æ®ä¸€ä¸ª <strong>æ¨¡ç³Šçš„è·¯ç”±é”®</strong> è½¬å‘åˆ°æŒ‡å®šçš„é˜Ÿåˆ—</p><p>åœºæ™¯ï¼šç‰¹å®šçš„æ¶ˆæ¯äº¤ç»™ç‰¹å®šçš„ä¸€ç±»ç³»ç»Ÿï¼ˆç¨‹åºï¼‰æ¥å¤„ç†</p><p>ç»‘å®šå…³ç³»ï¼šå¯ä»¥æ¨¡ç³ŠåŒ¹é…å¤šä¸ªç»‘å®š</p><ul><li><em>ï¼šåŒ¹é…ä¸€ä¸ªå•è¯ï¼Œä¾‹å¦‚ï¼š</em>.banana ï¼Œé‚£ä¹ˆ a.bananaã€b.banana éƒ½èƒ½åŒ¹é…</li><li>#ï¼šåŒ¹é… 0 ä¸ªæˆ–å¤šä¸ªå•è¯ï¼Œä¾‹å¦‚ï¼ša.#ï¼Œé‚£ä¹ˆ a.aã€a.bã€a.a.a éƒ½èƒ½åŒ¹é…</li></ul><p><img src="/../images/RabbitMQ/6.png" alt="6.png"></p><h4 id="ç”Ÿäº§è€…-3"><a href="#ç”Ÿäº§è€…-3" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopicProducer</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;topic_exchange&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">         <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel()) &#123;</span><br><span class="line"></span><br><span class="line">        channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;topic&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(scanner.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">userInput</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            String[] strings = userInput.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(strings.length&lt;<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> strings[<span class="number">0</span>];</span><br><span class="line">            <span class="type">String</span> <span class="variable">routingKey</span> <span class="operator">=</span> strings[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">            channel.basicPublish(EXCHANGE_NAME, routingKey, <span class="literal">null</span>, message.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot; [x] Sent &#x27;&quot;</span> + message + <span class="string">&quot; with routing: &quot;</span> + routingKey + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¶ˆè´¹è€…-3"><a href="#æ¶ˆè´¹è€…-3" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopicConsumer</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;topic_exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argv)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">    factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">    <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">    channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;topic&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆ›å»ºé˜Ÿåˆ—-1</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">queueName1</span> <span class="operator">=</span> <span class="string">&quot;frontend-test&quot;</span>;</span><br><span class="line">      channel.queueDeclare(queueName1, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">      channel.queueBind(queueName1, EXCHANGE_NAME, <span class="string">&quot;#.å‰ç«¯.#&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆ›å»ºé˜Ÿåˆ—-2</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">queueName2</span> <span class="operator">=</span> <span class="string">&quot;backend-test&quot;</span>;</span><br><span class="line">      channel.queueDeclare(queueName2, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">      channel.queueBind(queueName2, EXCHANGE_NAME, <span class="string">&quot;#.åç«¯.#&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åˆ›å»ºé˜Ÿåˆ—-3</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">queueName3</span> <span class="operator">=</span> <span class="string">&quot;product-test&quot;</span>;</span><br><span class="line">      channel.queueDeclare(queueName3, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">      channel.queueBind(queueName3, EXCHANGE_NAME, <span class="string">&quot;#.äº§å“.#&quot;</span>);</span><br><span class="line"></span><br><span class="line">      System.out.println(<span class="string">&quot; [*] Waiting for messages. To exit press CTRL+C&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¤„ç†ä»é˜Ÿåˆ—æ¥æ”¶çš„æ¶ˆæ¯</span></span><br><span class="line">      <span class="type">DeliverCallback</span> <span class="variable">direct1DeliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">          <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">          System.out.println(<span class="string">&quot; [direct1] Received &#x27;&quot;</span> +</span><br><span class="line">                  delivery.getEnvelope().getRoutingKey() + <span class="string">&quot;&#x27;:&#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="type">DeliverCallback</span> <span class="variable">direct2DeliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">          <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">          System.out.println(<span class="string">&quot; [direct2] Received &#x27;&quot;</span> +</span><br><span class="line">                  delivery.getEnvelope().getRoutingKey() + <span class="string">&quot;&#x27;:&#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="type">DeliverCallback</span> <span class="variable">direct3DeliverCallback</span> <span class="operator">=</span> (consumerTag, delivery) -&gt; &#123;</span><br><span class="line">          <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(delivery.getBody(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">          System.out.println(<span class="string">&quot; [direct3] Received &#x27;&quot;</span> +</span><br><span class="line">                  delivery.getEnvelope().getRoutingKey() + <span class="string">&quot;&#x27;:&#x27;&quot;</span> + message + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ¶ˆè´¹é˜Ÿåˆ—çš„æ¶ˆæ¯</span></span><br><span class="line">      channel.basicConsume(queueName1, <span class="literal">true</span>, direct1DeliverCallback, consumerTag -&gt; &#123;</span><br><span class="line">      &#125;);</span><br><span class="line">      channel.basicConsume(queueName2, <span class="literal">true</span>, direct2DeliverCallback, consumerTag -&gt; &#123;</span><br><span class="line">      &#125;);</span><br><span class="line">      channel.basicConsume(queueName3, <span class="literal">true</span>, direct3DeliverCallback, consumerTag -&gt; &#123;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h2><h3 id="æ¶ˆæ¯è¿‡æœŸæœºåˆ¶"><a href="#æ¶ˆæ¯è¿‡æœŸæœºåˆ¶" class="headerlink" title="æ¶ˆæ¯è¿‡æœŸæœºåˆ¶"></a>æ¶ˆæ¯è¿‡æœŸæœºåˆ¶</h3><h3 id="æ¶ˆæ¯ç¡®è®¤æœºåˆ¶"><a href="#æ¶ˆæ¯ç¡®è®¤æœºåˆ¶" class="headerlink" title="æ¶ˆæ¯ç¡®è®¤æœºåˆ¶"></a>æ¶ˆæ¯ç¡®è®¤æœºåˆ¶</h3><h3 id="æ­»ä¿¡é˜Ÿåˆ—"><a href="#æ­»ä¿¡é˜Ÿåˆ—" class="headerlink" title="æ­»ä¿¡é˜Ÿåˆ—"></a>æ­»ä¿¡é˜Ÿåˆ—</h3><h2 id="é¢è¯•è€ƒç‚¹"><a href="#é¢è¯•è€ƒç‚¹" class="headerlink" title="é¢è¯•è€ƒç‚¹"></a>é¢è¯•è€ƒç‚¹</h2><ol><li><p>æ¶ˆæ¯é˜Ÿåˆ—çš„æ¦‚å¿µã€æ¨¡å‹ã€åº”ç”¨åœºæ™¯</p></li><li><p>äº¤æ¢æœºçš„ç±»åˆ«ã€è·¯ç”±ç»‘å®šçš„å…³ç³»</p></li><li><p>æ¶ˆæ¯å¯é æ€§</p></li><li><ol><li>æ¶ˆæ¯ç¡®è®¤æœºåˆ¶</li><li>æ¶ˆæ¯æŒä¹…åŒ–</li><li>æ¶ˆæ¯è¿‡æœŸæœºåˆ¶</li><li>æ­»ä¿¡é˜Ÿåˆ—</li></ol></li><li><p>å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆç±»ä¼¼æ­»ä¿¡é˜Ÿåˆ—ï¼‰</p></li><li><p>é¡ºåºæ¶ˆè´¹ã€æ¶ˆè´¹å¹‚ç­‰æ€§</p></li><li><p>å¯æ‰©å±•æ€§</p></li><li><ol><li>é›†ç¾¤</li><li>æ•…éšœçš„æ¢å¤æœºåˆ¶</li><li>é•œåƒ</li></ol></li><li><p>è¿ç»´ç›‘æ§è­¦å‘Š</p></li></ol><h1 id="RabbitMQ-é¡¹ç›®å®æˆ˜"><a href="#RabbitMQ-é¡¹ç›®å®æˆ˜" class="headerlink" title="RabbitMQ é¡¹ç›®å®æˆ˜"></a>RabbitMQ é¡¹ç›®å®æˆ˜</h1><p>æ€ä¹ˆåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ RabbitMQ ï¼Ÿ</p><h2 id="é€‰æ‹©å®¢æˆ·ç«¯"><a href="#é€‰æ‹©å®¢æˆ·ç«¯" class="headerlink" title="é€‰æ‹©å®¢æˆ·ç«¯"></a>é€‰æ‹©å®¢æˆ·ç«¯</h2><ol><li>ä½¿ç”¨å®˜æ–¹çš„å®¢æˆ·ç«¯</li></ol><p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¥½ï¼Œæ¢è¯­è¨€æˆæœ¬ä½ï¼Œçµæ´»</p><p>ç¼ºç‚¹ï¼šå¤ªçµæ´»ï¼Œè¦è‡ªå·±ç»´æŠ¤ã€ç®¡ç†ï¼Œå¤ªéº»çƒ¦</p><ol><li>ä½¿ç”¨å°è£…å¥½çš„å®¢æˆ·ç«¯ï¼Œæ¯”å¦‚ Spring Boot RabbitMQ Starter</li></ol><p>ä¼˜ç‚¹ï¼šç®€å•æ˜“ç”¨ï¼Œå¯ç›´æ¥é…ç½®ä½¿ç”¨</p><p>ç¼ºç‚¹ï¼šå°è£…çš„å¤ªå¥½ï¼Œæœ‰é—¨æ§›ï¼Œéœ€è¦å­¦ä¹ ã€‚ä¸å¤Ÿçµæ´»ï¼Œè¢«æ¡†æ¶é™åˆ¶</p><p>æ ¹æ®åœºæ™¯é€‰æ‹©ï¼Œæ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£ä¹‹åˆ†ï¼šç±»ä¼¼äº jdbc å’Œ MyBatisè¨æ‹‰ </p><h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h2><p><strong>æ³¨æ„ï¼šMavenå¼•ç”¨æ—¶ AMQP çš„ç‰ˆæœ¬ä¸€å®šè¦å’Œ Spring Boot çš„ç‰ˆæœ¬ä¸€è‡´</strong>  </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åœ¨-yml-ä¸­å¼•å…¥é…ç½®"><a href="#åœ¨-yml-ä¸­å¼•å…¥é…ç½®" class="headerlink" title="åœ¨ yml ä¸­å¼•å…¥é…ç½®"></a>åœ¨ yml ä¸­å¼•å…¥é…ç½®</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">rabbitmq:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">guest</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">guest</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—"><a href="#åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—" class="headerlink" title="åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—"></a>åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—--ç”¨äºæµ‹è¯•ï¼ˆå¯åŠ¨ç¨‹åºå‰æ‰§è¡Œä¸€æ¬¡ï¼Œç”¨äºåˆ›å»ºé˜Ÿåˆ—ã€äº¤æ¢æœºï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MqInitMain</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">            factory.setHost(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line">            <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">EXCHANGE_NAME</span> <span class="operator">=</span> <span class="string">&quot;code_exchange&quot;</span>;</span><br><span class="line">            channel.exchangeDeclare(EXCHANGE_NAME, <span class="string">&quot;direct&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">&quot;code_queue&quot;</span>;</span><br><span class="line">            channel.queueDeclare(queueName, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line">            channel.queueBind(queueName, EXCHANGE_NAME, <span class="string">&quot;my_routingKey&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿäº§è€…-4"><a href="#ç”Ÿäº§è€…-4" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMessageProducer</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String exchange, String routingKey, String message)</span>&#123;</span><br><span class="line">        rabbitTemplate.convertAndSend(exchange, routingKey, message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ¶ˆè´¹è€…-4"><a href="#æ¶ˆè´¹è€…-4" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMessageConsumer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‡å®šç¨‹åºç›‘å¬çš„æ¶ˆæ¯é˜Ÿåˆ—å’Œç¡®è®¤æœºåˆ¶</span></span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="meta">@RabbitListener(queues = &#123;&quot;code_queue&quot;&#125;, ackMode = &quot;MANUAL&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveMessage</span><span class="params">(String message, Channel channel, <span class="meta">@Header(AmqpHeaders.DELIVERY_TAG)</span> <span class="type">long</span> deliveryTag)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;receiveMessage message = &#123;&#125;&quot;</span>, message);</span><br><span class="line">        channel.basicAck(deliveryTag, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyMessageProducerTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> MyMessageProducer myMessageProducer;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        myMessageProducer.sendMessage(<span class="string">&quot;code_exchange&quot;</span>, <span class="string">&quot;my_routingKey&quot;</span>, <span class="string">&quot;ä½ å¥½ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æ¶ˆæ¯é˜Ÿåˆ— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL</title>
      <link href="/2024/04/23/MySQL/"/>
      <url>/2024/04/23/MySQL/</url>
      
        <content type="html"><![CDATA[<!--# ã€SQLè¯­å¥çš„åˆ†ç±»ã€‘## DQL(æ•°æ®æŸ¥è¯¢è¯­è¨€)- ### descï¼ˆæŸ¥è¯¢è¡¨çš„ç»“æ„ï¼Œæ“ä½œå¯¹è±¡ï¼šè¡¨çš„ç»“æ„ï¼‰- ### selectï¼ˆæŸ¥è¯¢è¡¨çš„æ•°æ®ï¼Œæ“ä½œå¯¹è±¡ï¼šè¡¨çš„æ•°æ®ï¼‰## DML(æ•°æ®æ“ä½œè¯­è¨€)### æ“ä½œå¯¹è±¡ï¼š è¡¨çš„æ•°æ®- ### insert   å¢- ### delete   åˆ - ### updata   æ”¹## DDL(æ•°æ®å®šä¹‰è¯­è¨€)### æ“ä½œå¯¹è±¡ï¼š è¡¨çš„ç»“æ„- ### create  å¢- ### drop   åˆ - ### alter  æ”¹## TCL(äº‹åŠ¡æ§åˆ¶è¯­è¨€)- ### äº‹åŠ¡æäº¤ï¼šcommit- ### äº‹åŠ¡å›æ»šï¼šrollback## DCL(æ•°æ®æ§åˆ¶è¯­è¨€)- ### æˆæƒï¼šqrant- ### æ’¤é”€æƒé™ï¼šrevoke# ã€å•è¡Œå¤„ç†å‡½æ•°ã€‘**CONCAT()**ï¼šç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ã€‚<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(first_name, <span class="string">&#x27; &#x27;</span>, last_name) <span class="keyword">AS</span> full_name <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><p><strong>UPPER()</strong> å’Œ **LOWER()**ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™æˆ–å°å†™ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(first_name) <span class="keyword">AS</span> upper_name <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><p>**LENGTH()**ï¼šè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> LENGTH(description) <span class="keyword">AS</span> description_length <span class="keyword">FROM</span> products;</span><br></pre></td></tr></table></figure><p>**SUBSTRING()**ï¼šä»å­—ç¬¦ä¸²ä¸­æˆªå–å­ä¸²ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(title, <span class="number">1</span>, <span class="number">10</span>) <span class="keyword">AS</span> short_title <span class="keyword">FROM</span> books;</span><br></pre></td></tr></table></figure><p>**TRIM()**ï¼šå»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼æˆ–æŒ‡å®šå­—ç¬¦ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(<span class="string">&#x27; &#x27;</span> <span class="keyword">FROM</span> address) <span class="keyword">AS</span> trimmed_address <span class="keyword">FROM</span> customers;</span><br></pre></td></tr></table></figure><p>**DATE_FORMAT()**ï¼šå°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºæŒ‡å®šçš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATE_FORMAT(order_date, <span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="keyword">AS</span> formatted_date <span class="keyword">FROM</span> orders;</span><br></pre></td></tr></table></figure><p><strong>ROUND()</strong> å’Œ **CEIL()**ï¼šè¿›è¡Œæ•°å€¼çš„å››èˆäº”å…¥æˆ–å‘ä¸Šå–æ•´ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ROUND(price, <span class="number">2</span>) <span class="keyword">AS</span> rounded_price <span class="keyword">FROM</span> products;</span><br></pre></td></tr></table></figure><p><strong>IFNULL()</strong> æˆ– **COALESCE()**ï¼šè¿”å›ç¬¬ä¸€ä¸ªéNULLè¡¨è¾¾å¼çš„å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> IFNULL(discounted_price, price) <span class="keyword">AS</span> final_price <span class="keyword">FROM</span> products;</span><br></pre></td></tr></table></figure><p><strong>NOW()</strong> å’Œ **CURDATE()**ï¼šè¿”å›å½“å‰æ—¥æœŸæ—¶é—´æˆ–æ—¥æœŸã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> NOW() <span class="keyword">AS</span> current_datetime, CURDATE() <span class="keyword">AS</span> <span class="built_in">current_date</span>;</span><br></pre></td></tr></table></figure><h1 id="ã€å¤šè¡Œå¤„ç†å‡½æ•°ã€‘ï¼ˆåˆ†ç»„å‡½æ•°ï¼‰"><a href="#ã€å¤šè¡Œå¤„ç†å‡½æ•°ã€‘ï¼ˆåˆ†ç»„å‡½æ•°ï¼‰" class="headerlink" title="ã€å¤šè¡Œå¤„ç†å‡½æ•°ã€‘ï¼ˆåˆ†ç»„å‡½æ•°ï¼‰"></a>ã€å¤šè¡Œå¤„ç†å‡½æ•°ã€‘ï¼ˆåˆ†ç»„å‡½æ•°ï¼‰</h1><p>**COUNT()**ï¼šè®¡ç®—æ»¡è¶³æ¡ä»¶çš„è¡Œæ•°ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> total_customers <span class="keyword">FROM</span> customers;</span><br></pre></td></tr></table></figure><p><em><strong>æ³¨æ„ï¼šcount(å…·ä½“å­—æ®µ) è¡¨ç¤ºè¯¥å­—æ®µä¸‹ä¸ä¸ºç©ºçš„è¡Œæ•°</strong></em></p><p>**SUM()**ï¼šè®¡ç®—æŸåˆ—çš„æ•°å€¼æ€»å’Œã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(quantity) <span class="keyword">AS</span> total_quantity <span class="keyword">FROM</span> order_items;</span><br></pre></td></tr></table></figure><p>**AVG()**ï¼šè®¡ç®—æŸåˆ—çš„æ•°å€¼å¹³å‡å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(price) <span class="keyword">AS</span> average_price <span class="keyword">FROM</span> products;</span><br></pre></td></tr></table></figure><p><strong>MAX()</strong> å’Œ **MIN()**ï¼šæ‰¾å‡ºæŸåˆ—çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) <span class="keyword">AS</span> highest_salary <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><p>**GROUP_CONCAT()**ï¼šå°†ä¸€åˆ—çš„å€¼åˆå¹¶ä¸ºä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department, GROUP_CONCAT(first_name) <span class="keyword">AS</span> employees_list <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department;</span><br></pre></td></tr></table></figure><p><strong>HAVING</strong> å­å¥ï¼šåœ¨GROUP BYåå¯¹ç»“æœé›†ä¸­çš„åˆ†ç»„è¿›è¡Œè¿‡æ»¤ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary <span class="keyword">FROM</span> employees <span class="keyword">GROUP</span> <span class="keyword">BY</span> department <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary) <span class="operator">&gt;</span> <span class="number">50000</span>;</span><br></pre></td></tr></table></figure><p><strong>DISTINCT</strong>ï¼šä»ç»“æœé›†ä¸­ç­›é€‰å‡ºä¸é‡å¤çš„å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department <span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><p><strong>CASE</strong> è¡¨è¾¾å¼ï¼šæ ¹æ®æ¡ä»¶è¿”å›ä¸åŒçš„å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> employee_id, </span><br><span class="line">       <span class="keyword">CASE</span> <span class="keyword">WHEN</span> salary <span class="operator">&gt;</span> <span class="number">50000</span> <span class="keyword">THEN</span> <span class="string">&#x27;High&#x27;</span></span><br><span class="line">            <span class="keyword">WHEN</span> salary <span class="operator">&gt;</span> <span class="number">30000</span> <span class="keyword">THEN</span> <span class="string">&#x27;Medium&#x27;</span></span><br><span class="line">            <span class="keyword">ELSE</span> <span class="string">&#x27;Low&#x27;</span></span><br><span class="line">       <span class="keyword">END</span> <span class="keyword">AS</span> salary_category</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></table></figure><h1 id="ã€æ•°æ®ç±»å‹ã€‘"><a href="#ã€æ•°æ®ç±»å‹ã€‘" class="headerlink" title="ã€æ•°æ®ç±»å‹ã€‘"></a>ã€æ•°æ®ç±»å‹ã€‘</h1><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å¤§å°</th><th>æè¿°</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>tinyint</td><td>1</td><td>çŸ­æ•´æ•°</td><td>-128, 127</td></tr><tr><td>int</td><td>4</td><td>æ•´æ•°</td><td>-2147483648, -2147483647</td></tr><tr><td>bigint</td><td>8</td><td>é•¿æ•´æ•°</td><td>-2^63, 2^63-1</td></tr><tr><td>float</td><td>4</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°</td><td>3.14, -0.002</td></tr><tr><td>double</td><td>8</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°</td><td>2.718, -123.456</td></tr><tr><td>char(n)</td><td>0-255 bytee</td><td>å›ºå®šé•¿åº¦å­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸ºn</td><td>â€˜ABCâ€™, â€˜OpenAIâ€™</td></tr><tr><td>varchar(n)</td><td>0-65535 bytee</td><td>å¯å˜é•¿åº¦å­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦ä¸ºn</td><td>â€˜Helloâ€™, â€˜John Doeâ€™</td></tr><tr><td>text</td><td>0-65535 bytee</td><td>é•¿æ–‡æœ¬å­—ç¬¦ä¸²</td><td>â€˜Lorem ipsumâ€¦â€™</td></tr><tr><td>date</td><td>3</td><td>æ—¥æœŸ</td><td>â€˜2023-08-17â€™</td></tr><tr><td>time</td><td>3</td><td>æ—¶é—´</td><td>â€˜14:30:00â€™</td></tr></tbody></table><h1 id="ã€çº¦æŸå­—æ®µã€‘"><a href="#ã€çº¦æŸå­—æ®µã€‘" class="headerlink" title="ã€çº¦æŸå­—æ®µã€‘"></a>ã€çº¦æŸå­—æ®µã€‘</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºä¸€ä¸ªè¡¨ç»“æ„</span><br><span class="line">create table <span class="title function_">tb_user</span><span class="params">(</span></span><br><span class="line"><span class="params">id <span class="type">int</span> primary key comment <span class="string">&#x27;IDï¼Œå”¯ä¸€æ ‡è¯†&#x27;</span>,</span></span><br><span class="line"><span class="params">name varchar(<span class="number">20</span>)</span> not <span class="literal">null</span> comment <span class="string">&#x27;x&#x27;</span>n<span class="string">&#x27;</span></span><br><span class="line"><span class="string">) comment &#x27;</span>ç”¨æˆ·è¡¨<span class="string">&#x27;;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">çº¦æŸ</th><th align="center">æè¿°</th><th align="center">å…³é”®å­—</th></tr></thead><tbody><tr><td align="center">éç©ºçº¦æŸ</td><td align="center">ä¸èƒ½ä¸ºnull</td><td align="center">not null</td></tr><tr><td align="center">å”¯ä¸€çº¦æŸ</td><td align="center">å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€çš„ã€ä¸é‡å¤</td><td align="center">unique</td></tr><tr><td align="center">ä¸»é”®çº¦æŸ</td><td align="center">ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œéç©ºä¸”å”¯ä¸€</td><td align="center">primary key</td></tr><tr><td align="center">é»˜è®¤çº¦æŸ</td><td align="center">æœªæŒ‡å®šè¯¥å­—æ®µï¼Œåˆ™é‡‡ç”¨çš„é»˜è®¤å€¼</td><td align="center">default</td></tr><tr><td align="center">å¤–é”®çº¦æŸ</td><td align="center">è®©ä¸¤å¼ è¡¨çš„æ•°æ®å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td><td align="center">foreign key</td></tr></tbody></table><h1 id="ã€æ¡ä»¶æŸ¥è¯¢ã€‘-ã€å•è¡¨æŸ¥è¯¢ã€‘"><a href="#ã€æ¡ä»¶æŸ¥è¯¢ã€‘-ã€å•è¡¨æŸ¥è¯¢ã€‘" class="headerlink" title="ã€æ¡ä»¶æŸ¥è¯¢ã€‘-ã€å•è¡¨æŸ¥è¯¢ã€‘"></a>ã€æ¡ä»¶æŸ¥è¯¢ã€‘-ã€å•è¡¨æŸ¥è¯¢ã€‘</h1><p><em><strong>fromï¼š</strong></em>å°†è¦æŸ¥è¯¢çš„è¡¨</p><p><em><strong>whereï¼š</strong></em>é™åˆ¶æ¡ä»¶</p><p><em><strong>betweenâ€¦andâ€¦ï¼š</strong></em>åœ¨ä¸¤è€…ä¹‹é—´ï¼Œå·¦å°å³å¤§</p><p><em><strong>æ³¨æ„</strong></em>ï¼šæ•°æ®åº“ä¸­çš„nullä¸èƒ½ç”¨ &#x3D; å·ï¼Œåº”è¯¥ç”¨ is </p><p><em><strong>orï¼š</strong></em>æˆ–è€…</p><p><em><strong>inï¼š</strong></em>ä¸æ˜¯ä¸€ä¸ªåŒºé—´ï¼Œåé¢è·Ÿå…·ä½“çš„å€¼ã€‚ä¾‹ï¼šsal in (200, 800)</p><p><em><strong>notï¼š</strong></em>è¡¨ç¤ºå–é</p><p><em><strong>likeï¼š</strong></em>æ¨¡ç³ŠæŸ¥è¯¢    like â€˜ % ç¬¦å· % â€˜ ã€‚  æŸ¥è¯¢å«æœ‰è¯¥ç¬¦å·çš„å­—æ®µ </p><p><em><strong>distinctï¼š</strong></em>å»é™¤é‡å¤çš„å­—æ®µ</p><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="comment">---å‡åº---</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">ename,sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">sal (<span class="keyword">asc</span>);<span class="operator">/</span><span class="operator">/</span>é»˜è®¤å‡åº</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="comment">---é™åº---</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">ename,sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="comment">---å¤šå­—æ®µæ’åº---</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">ename,sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">sal <span class="keyword">asc</span>, ename <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure><h3 id="å…³é”®å­—æ‰§è¡Œé¡ºåº"><a href="#å…³é”®å­—æ‰§è¡Œé¡ºåº" class="headerlink" title="å…³é”®å­—æ‰§è¡Œé¡ºåº"></a>å…³é”®å­—æ‰§è¡Œé¡ºåº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">having</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">...</span><br><span class="line">limit</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>ç»¼åˆä¾‹å­ï¼š</strong><em><strong>æ‰¾å‡ºæ¯ä¸ªå²—ä½çš„å¹³å‡è–ªèµ„ï¼Œè¦æ±‚æ˜¾ç¤ºå¹³å‡è–ªèµ„å¤§äº1500çš„ï¼Œé™¤äº†MANAGERå²—ä½ä¹‹å¤–ï¼Œè¦æ±‚æŒ‰ç…§å¹³å‡è–ªèµ„é™åºæ’</strong></em></p><p><em><strong>select</strong></em></p><p>â€‹<em><strong>job, avg(sal) as avgsal</strong></em></p><p><em><strong>form</strong></em></p><p>â€‹<em><strong>emp</strong></em></p><p><em><strong>where</strong></em></p><p>â€‹<em><strong>job &lt;&gt; â€˜MANAGERâ€™</strong></em></p><p><em><strong>group by</strong></em></p><p>â€‹<em><strong>job</strong></em></p><p><em><strong>having</strong></em></p><p>â€‹<em><strong>avg(sal)  &gt; 1500</strong></em></p><p><em><strong>order by</strong></em></p><p>â€‹<em><strong>avgsal desc;</strong></em></p><h1 id="ã€è¿æ¥æŸ¥è¯¢ã€‘-ã€å¤šè¡¨æŸ¥è¯¢ã€‘"><a href="#ã€è¿æ¥æŸ¥è¯¢ã€‘-ã€å¤šè¡¨æŸ¥è¯¢ã€‘" class="headerlink" title="ã€è¿æ¥æŸ¥è¯¢ã€‘-ã€å¤šè¡¨æŸ¥è¯¢ã€‘"></a>ã€è¿æ¥æŸ¥è¯¢ã€‘-ã€å¤šè¡¨æŸ¥è¯¢ã€‘</h1><h3 id="å†…è¿æ¥"><a href="#å†…è¿æ¥" class="headerlink" title="å†…è¿æ¥"></a>å†…è¿æ¥</h3><h4 id="ç­‰å€¼è¿æ¥"><a href="#ç­‰å€¼è¿æ¥" class="headerlink" title="ç­‰å€¼è¿æ¥"></a>ç­‰å€¼è¿æ¥</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">e.ename, d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span><span class="operator">/</span><span class="operator">/</span>å†…è¿æ¥</span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">on</span><span class="operator">/</span><span class="operator">/</span>æ¡ä»¶</span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure><h4 id="éç­‰å€¼è¿æ¥"><a href="#éç­‰å€¼è¿æ¥" class="headerlink" title="éç­‰å€¼è¿æ¥"></a>éç­‰å€¼è¿æ¥</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">e.ename, e.sal, s.grade</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span><span class="operator">/</span><span class="operator">/</span>å†…è¿æ¥</span><br><span class="line">salgrade s</span><br><span class="line"><span class="keyword">on</span><span class="operator">/</span><span class="operator">/</span>æ¡ä»¶</span><br><span class="line">e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure><h4 id="è‡ªè¿æ¥"><a href="#è‡ªè¿æ¥" class="headerlink" title="è‡ªè¿æ¥"></a>è‡ªè¿æ¥</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">a.ename <span class="keyword">as</span> <span class="string">&#x27;å‘˜å·¥è¡¨&#x27;</span>, b.ename <span class="keyword">as</span> <span class="string">&#x27;é¢†å¯¼å&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp a</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span><span class="operator">/</span><span class="operator">/</span>å†…è¿æ¥</span><br><span class="line">emp b</span><br><span class="line"><span class="keyword">on</span><span class="operator">/</span><span class="operator">/</span>æ¡ä»¶</span><br><span class="line">a.mgr <span class="operator">=</span> b.empno;</span><br></pre></td></tr></table></figure><h3 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h3><h4 id="å·¦å¤–è¿æ¥ï¼ˆå·¦è¿æ¥ï¼‰"><a href="#å·¦å¤–è¿æ¥ï¼ˆå·¦è¿æ¥ï¼‰" class="headerlink" title="å·¦å¤–è¿æ¥ï¼ˆå·¦è¿æ¥ï¼‰"></a>å·¦å¤–è¿æ¥ï¼ˆå·¦è¿æ¥ï¼‰</h4><p><em><strong>leftï¼š</strong></em>è¡¨ç¤º<strong>join</strong>å…³é”®å­—<strong>å·¦è¾¹</strong>çš„è¡¨ä¸ºä¸»è¡¨ï¼Œä¸»è¡¨çš„æ•°æ®å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename, d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">dept d </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> <span class="operator">/</span><span class="operator">/</span><span class="keyword">outer</span>å¯ä»¥çœç•¥</span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure><h4 id="å³å¤–è¿æ¥ï¼ˆå³è¿æ¥ï¼‰"><a href="#å³å¤–è¿æ¥ï¼ˆå³è¿æ¥ï¼‰" class="headerlink" title="å³å¤–è¿æ¥ï¼ˆå³è¿æ¥ï¼‰"></a>å³å¤–è¿æ¥ï¼ˆå³è¿æ¥ï¼‰</h4><p><em><strong>rightï¼š</strong></em>è¡¨ç¤º<strong>join</strong>å…³é”®å­—<strong>å³è¾¹</strong>çš„è¡¨ä¸ºä¸»è¡¨ï¼Œä¸»è¡¨çš„æ•°æ®å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.ename, d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e </span><br><span class="line"><span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> <span class="operator">/</span><span class="operator">/</span><span class="keyword">outer</span>å¯ä»¥çœç•¥</span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line">e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure><p>â€“&gt;</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git</title>
      <link href="/2024/04/23/Git/"/>
      <url>/2024/04/23/Git/</url>
      
        <content type="html"><![CDATA[<!--# Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·## 1. æ¦‚è¿°### 1.1 ç‰ˆæœ¬æ§åˆ¶å™¨çš„æ–¹å¼- é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼šSVNã€CVS- åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼šGit### 1.2 Gitå·¥ä½œæµç¨‹1. cloneï¼ˆå…‹éš†ï¼‰2. checkoutï¼ˆæ£€å‡ºï¼‰3. addï¼ˆæ·»åŠ ï¼‰4. commitï¼ˆæäº¤ï¼‰5. fetchï¼ˆæŠ“å–ï¼‰6. pullï¼ˆæ‹‰å–ï¼‰7. pushï¼ˆæ¨é€ï¼‰### 1.3 è®¾ç½®ç”¨æˆ·ä¿¡æ¯å’ŒæŸ¥çœ‹é…ç½®ä¿¡æ¯<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è®¾ç½®ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">git config --global user.name&quot;ç”¨æˆ·å&quot;</span><br><span class="line">git config --global user.email&quot;é‚®ç®±&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹é…ç½®ä¿¡æ¯</span></span><br><span class="line">git config --global user.name</span><br><span class="line">git config --global user.email</span><br></pre></td></tr></table></figure><h2 id="2-å¸¸ç”¨å‘½ä»¤"><a href="#2-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2. å¸¸ç”¨å‘½ä»¤"></a>2. å¸¸ç”¨å‘½ä»¤</h2><h3 id="2-1-è·å–æœ¬åœ°ä»“åº“"><a href="#2-1-è·å–æœ¬åœ°ä»“åº“" class="headerlink" title="2.1 è·å–æœ¬åœ°ä»“åº“"></a>2.1 è·å–æœ¬åœ°ä»“åº“</h3><p><em>è¦ä½¿ç”¨Gitå¯¹æˆ‘ä»¬çš„åˆ°å—è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œé¦–å…ˆéœ€è¦è·å¾—æœ¬åœ°ä»“åº“</em></p><ul><li>åœ¨ç”µè„‘çš„ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ä½œä¸ºæˆ‘ä»¬çš„æœ¬åœ°Gitä»“åº“</li><li>è¿›å…¥è¿™ä¸ªç›®å½•ä¸­ï¼Œå³é”®æ‰“å¼€Git bashçª—å£</li><li>æ‰§è¡Œå‘½ä»¤git init</li><li>åˆ›å»ºæˆåŠŸå¯åœ¨æ–‡ä»¶å¤¹ä¸‹çœ‹åˆ°éšè—çš„.gitç›®å½•</li></ul><h3 id="2-2-åŸºç¡€æ“ä½œæŒ‡ä»¤"><a href="#2-2-åŸºç¡€æ“ä½œæŒ‡ä»¤" class="headerlink" title="2.2 åŸºç¡€æ“ä½œæŒ‡ä»¤"></a>2.2 åŸºç¡€æ“ä½œæŒ‡ä»¤</h3><p><em>Gitå·¥ä½œç›®å½•ä¸‹å¯¹æ–‡ä»¶çš„<strong>ä¿®æ”¹</strong>ï¼ˆå¢ã€åˆ ã€æ”¹ï¼‰ä¼šå­˜åœ¨å‡ ä¸ªçŠ¶æ€ï¼Œè¿™äº›<strong>ä¿®æ”¹</strong>çš„çŠ¶æ€ä¼šéšç€æˆ‘ä»¬æ‰§è¡ŒGitçš„å‘½ä»¤è€Œå‘ç”Ÿå˜åŒ–</em></p><ul><li>git add(å·¥ä½œåŒº   â€“&gt;   æš‚å­˜åŒº)</li><li>git commit             (æš‚å­˜åŒº   â€“&gt;   æœ¬åœ°ä»“åº“)</li></ul><h4 id="2-2-1-æŸ¥çœ‹ä¿®æ”¹çš„çŠ¶æ€ï¼ˆstatusï¼‰"><a href="#2-2-1-æŸ¥çœ‹ä¿®æ”¹çš„çŠ¶æ€ï¼ˆstatusï¼‰" class="headerlink" title="2.2.1 æŸ¥çœ‹ä¿®æ”¹çš„çŠ¶æ€ï¼ˆstatusï¼‰"></a>2.2.1 æŸ¥çœ‹ä¿®æ”¹çš„çŠ¶æ€ï¼ˆstatusï¼‰</h4><ul><li>ä½œç”¨ï¼šæŸ¥çœ‹ä¿®æ”¹çš„çŠ¶æ€ï¼ˆæš‚å­˜åŒºã€å·¥ä½œåŒºï¼‰</li><li>å‘½ä»¤å½¢å¼ï¼š<strong>git status</strong></li></ul><h4 id="2-2-2-æ·»åŠ å·¥ä½œåŒºåˆ°æš‚å­˜åŒºï¼ˆaddï¼‰"><a href="#2-2-2-æ·»åŠ å·¥ä½œåŒºåˆ°æš‚å­˜åŒºï¼ˆaddï¼‰" class="headerlink" title="2.2.2 æ·»åŠ å·¥ä½œåŒºåˆ°æš‚å­˜åŒºï¼ˆaddï¼‰"></a><strong>2.2.2 æ·»åŠ å·¥ä½œåŒºåˆ°æš‚å­˜åŒºï¼ˆaddï¼‰</strong></h4><ul><li>ä½œç”¨ï¼šæ·»åŠ å·¥ä½œåŒºçš„ä¸€ä¸ªæˆ–å¤šä¸ª<strong>ä¿®æ”¹</strong>åˆ°æš‚å­˜åŒº</li><li>å‘½ä»¤å½¢å¼ï¼š<strong>git add å•ä¸ªæ–‡ä»¶å|é€šé…ç¬¦</strong><ul><li>å°†æ‰€æœ‰ä¿®æ”¹åŠ å…¥æš‚å­˜åŒºï¼š<strong>git add .</strong></li></ul></li></ul><h4 id="2-2-3-æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“ï¼ˆcommitï¼‰"><a href="#2-2-3-æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“ï¼ˆcommitï¼‰" class="headerlink" title="2.2.3 æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“ï¼ˆcommitï¼‰"></a>2.2.3 æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“ï¼ˆcommitï¼‰</h4><ul><li>ä½œç”¨ï¼šæäº¤æš‚å­˜åŒºå†…å®¹åˆ°æœ¬åœ°ä»“åº“çš„å½“å‰åˆ†æ”¯</li><li>å‘½ä»¤å½¢å¼ï¼š<strong>git commit -m â€œæ³¨é‡Šå†…å®¹â€</strong></li></ul><h4 id="2-2-4-æŸ¥çœ‹æäº¤æ—¥å¿—ï¼ˆlogï¼‰"><a href="#2-2-4-æŸ¥çœ‹æäº¤æ—¥å¿—ï¼ˆlogï¼‰" class="headerlink" title="2.2.4 æŸ¥çœ‹æäº¤æ—¥å¿—ï¼ˆlogï¼‰"></a>2.2.4 æŸ¥çœ‹æäº¤æ—¥å¿—ï¼ˆlogï¼‰</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç”¨äºè¾“å‡ºgitæäº¤æ—¥å¿—</span></span><br><span class="line">alias git-log=&#x27;git log --pretty=oneline --all --graph --abbrev-commit&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">git-log åŒ…å«ä¸‹é¢çš„å‚æ•°</span></span><br></pre></td></tr></table></figure><ul><li>ä½œç”¨ï¼šæŸ¥çœ‹æäº¤è®°å½•</li><li>å‘½ä»¤å½¢å¼ï¼šgit log [option]<ul><li><strong>options</strong><ul><li>â€“all æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯</li><li>â€“pretty&#x3D;oneline å°†æäº¤ä¿¡æ¯æ˜¾ç¤ºä¸ºä¸€è¡Œ</li><li>â€“abbrev-commit  ä½¿å¾—è¾“å‡ºçš„commitldæ›´ç®€çŸ­</li><li>â€“graph  ä»¥å›¾çš„å½¢å¼æ˜¾ç¤º</li></ul></li></ul></li></ul><h4 id="2-2-5-ç‰ˆæœ¬å›é€€"><a href="#2-2-5-ç‰ˆæœ¬å›é€€" class="headerlink" title="2.2.5 ç‰ˆæœ¬å›é€€"></a>2.2.5 ç‰ˆæœ¬å›é€€</h4><ul><li><p>ä½œç”¨ï¼šç‰ˆæœ¬åˆ‡æ¢</p></li><li><p>å‘½ä»¤å½¢å¼ï¼šgit reset â€“hard commitID</p><ul><li>commitID å¯ä»¥ä½¿ç”¨ git-log æˆ– git log æŒ‡ä»¤æŸ¥çœ‹</li></ul></li><li><p>æŸ¥çœ‹å·²ç»åˆ é™¤çš„è®°å½•</p><ul><li>git reflog</li></ul></li></ul><h4 id="2-2-6-æ·»åŠ æ–‡ä»¶è‡³å¿½ç•¥åˆ—è¡¨"><a href="#2-2-6-æ·»åŠ æ–‡ä»¶è‡³å¿½ç•¥åˆ—è¡¨" class="headerlink" title="2.2.6 æ·»åŠ æ–‡ä»¶è‡³å¿½ç•¥åˆ—è¡¨"></a>2.2.6 æ·»åŠ æ–‡ä»¶è‡³å¿½ç•¥åˆ—è¡¨</h4><p>åˆ›å»ºä¸€ä¸ªåä¸º .gitignore çš„æ–‡ä»¶ï¼Œåˆ—å‡ºéœ€è¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># no .a files</span><br><span class="line">*.a</span><br></pre></td></tr></table></figure><h3 id="2-3-åˆ†æ”¯"><a href="#2-3-åˆ†æ”¯" class="headerlink" title="2.3 åˆ†æ”¯"></a>2.3 åˆ†æ”¯</h3><p>åˆ†æ”¯å¯ä»¥æŠŠä½ çš„å·¥ä½œä»å¼€å‘ä¸»çº¿ä¸Šåˆ†ç¦»å‡ºæ¥è¿›è¡Œé‡å¤§bugçš„ä¿®æ”¹ã€å¼€å‘æ–°çš„åŠŸèƒ½ï¼Œä»¥å…å½±å“å¼€å‘ä¸»çº¿</p><h4 id="2-3-1-æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯"><a href="#2-3-1-æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯" class="headerlink" title="2.3.1 æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯"></a>2.3.1 æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</h4><ul><li>git branch</li></ul><h4 id="2-3-2-åˆ›å»ºæœ¬åœ°åˆ†æ”¯"><a href="#2-3-2-åˆ›å»ºæœ¬åœ°åˆ†æ”¯" class="headerlink" title="2.3.2 åˆ›å»ºæœ¬åœ°åˆ†æ”¯"></a>2.3.2 åˆ›å»ºæœ¬åœ°åˆ†æ”¯</h4><ul><li>git branch åˆ†æ”¯å<ul><li>é‡å‘½åï¼š-m <old_name> <new_name></li><li>åˆ é™¤ï¼š-d <b_name></li></ul></li></ul><h4 id="2-3-3-åˆ‡æ¢åˆ†æ”¯ï¼ˆcheckoutï¼‰"><a href="#2-3-3-åˆ‡æ¢åˆ†æ”¯ï¼ˆcheckoutï¼‰" class="headerlink" title="2.3.3 åˆ‡æ¢åˆ†æ”¯ï¼ˆcheckoutï¼‰"></a>2.3.3 åˆ‡æ¢åˆ†æ”¯ï¼ˆcheckoutï¼‰</h4><ul><li>git checkout</li></ul><p>å¯ä»¥åˆ‡æ¢ä¸å­˜åœ¨çš„åˆ†æ”¯ï¼ˆåˆ›å»ºå¹¶åˆ‡æ¢ï¼‰</p><ul><li>git checkout -b åˆ†æ”¯å</li></ul><h4 id="2-3-4-åˆå¹¶åˆ†æ”¯ï¼ˆmergeï¼‰"><a href="#2-3-4-åˆå¹¶åˆ†æ”¯ï¼ˆmergeï¼‰" class="headerlink" title="2.3.4 åˆå¹¶åˆ†æ”¯ï¼ˆmergeï¼‰"></a>2.3.4 åˆå¹¶åˆ†æ”¯ï¼ˆmergeï¼‰</h4><ul><li>git merge åˆ†æ”¯åç§°ï¼ˆå°†è¯¥åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼‰</li></ul><p>â€“&gt;</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç‰ˆæœ¬æ§åˆ¶å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
